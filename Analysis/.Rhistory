library("dplyr")
library('PerformanceAnalytics') #find correlation chart.Correlation()
library("ggplot2")
library("knitr")
#Read in the data()
med <- read.csv('~/Desktop/Demographic/claims_med_interns_2016-2018.csv')
pharm <- read.csv('~/Desktop/Demographic/claims_pharm_capstone_2016-2018.csv')
#med data analysis
med_revise <- med %>% select("Claim.ID", "Member.Gender", "Age", "Zip..5.digit.",
"Primary.ICD.Diagnosis.Code", "Primary.ICD.Rollup",
"Incurred.Year", "CCHG.Label")
ggplot(med_revise) +
geom_bar(aes(x=Member.Gender, color=Member.Gender, fill = Member.Gender)) +
labs(title = "Gender Distribution", x = "Gender", y = "Count") +
scale_y_continuous(name="Fluorescent intensity/arbitrary units", labels = scales::comma) +
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)))
<<<<<<< HEAD
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
#library(PerformanceAnalytics) #find correlation chart.Correlation()
library(ggplot2)
library(knitr)
library(plotly)
#Read in the data()
med <- read.csv('claims_med_interns_2016-2018.csv', stringsAsFactors = F)
pharm <- read.csv('claims_pharm_capstone_2016-2018.csv', stringsAsFactors = F)
#med data analysis
med_revise <- med %>% select("Member.ID.Encrypted", "Claim.ID","Member.Gender",
"Age","Primary.ICD.Diagnosis.Code","Primary.ICD.Rollup",
"X2nd.ICD.Diagnosis.Code","X2nd.ICD.Rollup",
"X3rd.ICD.Diagnosis.Code","X3rd.ICD.Rollup",
"X4th.ICD.Diagnosis.Code", "X4th.ICD.Rollup",
"Incurred.Year", "CCHG.Label", "Zip..5.digit.")
health_factors_by_code <- med_revise %>%
filter(Primary.ICD.Rollup == "Factors influencing health") %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted) %>%
summarize(num = n()) %>%
arrange(desc(num)) %>%
head(10)
health_factors_by_code <- med_revise %>%
filter(Primary.ICD.Rollup == "Factors influencing health")
med_revise %>%
filter(Primary.ICD.Rollup == "Factors influencing health")
med_revise
health_factors_by_code <- med_revise %>%
filter(Primary.ICD.Rollup == "Factors influencing health")
health_factors_by_code <- med_revise %>%
filter(Primary.ICD.Rollup == "Factors influencing health care") %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted) %>%
summarize(num = n()) %>%
arrange(desc(num)) %>%
head(10)
kable(health_factors_by_code)
health_factors_by_cchg <- med_revise %>%
filter(Primary.ICD.Rollup == "Factors influencing health care") %>%
group_by(CCHG.Label) %>%
distinct(Member.ID.Encrypted) %>%
summarize(num = n()) %>%
arrange(desc(num)) %>%
head(10)
kable(health_factors_by_cchg)
=======
install.packages("plotly")
#Read in the data()
med <- read.csv('claims_med_interns_2016-2018.csv', stringsAsFactors = F)
>>>>>>> 3022a0695a5136a0520f0265a457f98be5c92ada
library(dplyr)
#library(PerformanceAnalytics) #find correlation chart.Correlation()
library(ggplot2)
library(knitr)
library(plotly)
#Read in the data()
med <- read.csv('data/claims_med_interns_2016-2018.csv', stringsAsFactors = F)
View(med)
pharm <- read.csv('data/claims_pharm_capstone_2016-2018.csv', stringsAsFactors = F)
View(pharm)
library(dplyr)
library(dplyr)
library(ggplot2)
#Read in the data()
med <- read.csv('data/claims_med_interns_2016-2018.csv', stringsAsFactors = F)
#Read in the data()
med <- read.csv('../data/claims_med_interns_2016-2018.csv', stringsAsFactors = F)
setwd("D:/Users/yhejazi/Desktop/Capstone2019/Analysis")
#Read in the data()
med <- read.csv('../data/claims_med_interns_2016-2018.csv', stringsAsFactors = F)
#Read in the data()
med <- read.csv('../../data/claims_med_interns_2016-2018.csv', stringsAsFactors = F)
#med data analysis
med_revise <- med %>% select("Member.ID.Encrypted", "Claim.ID","Member.Gender",
"Age","Primary.ICD.Diagnosis.Code","Primary.ICD.Rollup",
"X2nd.ICD.Diagnosis.Code","X2nd.ICD.Rollup",
"X3rd.ICD.Diagnosis.Code","X3rd.ICD.Rollup",
"X4th.ICD.Diagnosis.Code", "X4th.ICD.Rollup",
"Incurred.Year", "CCHG.Label", "Zip..5.digit.") %>%
filter(med$Zip..5.digit. < 99403 & med$Zip..5.digit. > 98000)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(knitr)
library(plotly)
#Read in the data()
med <- read.csv('../../data/claims_med_interns_2016-2018.csv', stringsAsFactors = F)
#pharm <- read.csv('../../data/claims_pharm_capstone_2016-2018.csv', stringsAsFactors = F)
#med data analysis
med_revise <- med %>% select("Member.ID.Encrypted", "Claim.ID","Member.Gender",
"Age","Primary.ICD.Diagnosis.Code","Primary.ICD.Rollup",
"X2nd.ICD.Diagnosis.Code","X2nd.ICD.Rollup",
"X3rd.ICD.Diagnosis.Code","X3rd.ICD.Rollup",
"X4th.ICD.Diagnosis.Code", "X4th.ICD.Rollup",
"Incurred.Year", "CCHG.Label", "Zip..5.digit.") %>%
filter(med$Zip..5.digit. < 99403 & med$Zip..5.digit. > 98000)
#Diabetes (excluding gestational diabetes, which has a different ICD-10 code than diabetes mellitus)
diabetes <- med_revise %>%
filter(grepl('Diabetes', Primary.ICD.Rollup)) %>%
group_by(Primary.ICD.Rollup) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n())
View(diabetes)
#Diabetes (excluding gestational diabetes, which has a different ICD-10 code than diabetes mellitus)
diabetes <- med_revise %>%
filter(grepl('Diabetes', Primary.ICD.Rollup))
cancer <- med_revise %>%
filter(grepl('Cancer', Primary.ICD.Rollup)) %>%
group_by(Primary.ICD.Rollup) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n())
View(cancer)
#Sleep disorders (insomnia ICD-10 is G47), lots of unknowns
#G4700 is Insomnia, unspecified
#G4710 is Hypersomnia, unspecified
#G4730 is Sleep apnea, unspecified
#G4733 is Obstructive sleep apnea (adult) (pediatric)
#G4739 is Other sleep apnea
sleep_disorders <- med_revise %>%
filter(grepl('G47', Primary.ICD.Diagnosis.Code)) %>%
group_by(Primary.ICD.Rollup) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n())
View(sleep_disorders)
View(sleep_disorders)
library(dplyr)
library(dplyr)
library(ggplot2)
library(knitr)
library(plotly)
#Read in the data()
med <- read.csv('../../data/claims_med_interns_2016-2018.csv', stringsAsFactors = F)
#med data analysis
med_revise <- med %>% select("Member.ID.Encrypted", "Claim.ID","Member.Gender",
"Age","Primary.ICD.Diagnosis.Code","Primary.ICD.Rollup",
"X2nd.ICD.Diagnosis.Code","X2nd.ICD.Rollup",
"X3rd.ICD.Diagnosis.Code","X3rd.ICD.Rollup",
"X4th.ICD.Diagnosis.Code", "X4th.ICD.Rollup",
"Incurred.Year", "CCHG.Label", "Zip..5.digit.") %>%
filter(med$Zip..5.digit. < 99403 & med$Zip..5.digit. > 98000)
#chronic condition of interests:
diabetes <- med_revise %>%
filter(grepl('Diabetes', Primary.ICD.Rollup))
View(diabetes)
diabetes['label'] = 'diabetes'
View(diabetes)
#chronic condition of interests:
diabetes <- med_revise %>%
filter(grepl('Diabetes', Primary.ICD.Rollup))
#chronic condition of interests:
diabetes <- med_revise %>%
filter(grepl('Diabetes', Primary.ICD.Rollup)) %>%
mutate(label = 'diabetes')
View(diabetes)
library(dplyr)
library(ggplot2)
library(knitr)
library(plotly)
med <- read.csv('../../data/claims_med_interns_2016-2018.csv', stringsAsFactors = F)
#pharm <- read.csv('../../data/claims_pharm_capstone_2016-2018.csv', stringsAsFactors = F)
#med data analysis
med_revise <- med %>% select("Member.ID.Encrypted", "Claim.ID","Member.Gender",
"Age","Primary.ICD.Diagnosis.Code","Primary.ICD.Rollup",
"X2nd.ICD.Diagnosis.Code","X2nd.ICD.Rollup",
"X3rd.ICD.Diagnosis.Code","X3rd.ICD.Rollup",
"X4th.ICD.Diagnosis.Code", "X4th.ICD.Rollup",
"Incurred.Year", "CCHG.Label", "Zip..5.digit.") %>%
filter(med$Zip..5.digit. < 99403 & med$Zip..5.digit. > 98000)
source('get_chronic.R')
source('get_chronic.R')
# All joined together
all <- rbind(diabetes, hypertension)
View(all)
# All joined together
all <- rbind(diabetes, hypertension, injury)
# All joined together
all <- rbind(diabetes, hypertension, obesity, cancer, musculoskeletal, cardiovascular,
asthma, copd, cholesterol, sleep_disorders, pain, injury)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(knitr)
library(plotly)
med <- read.csv('../../data/claims_med_interns_2016-2018.csv', stringsAsFactors = F)
#pharm <- read.csv('../../data/claims_pharm_capstone_2016-2018.csv', stringsAsFactors = F)
#med data analysis
med_revise <- med %>% select("Member.ID.Encrypted", "Claim.ID","Member.Gender",
"Age","Primary.ICD.Diagnosis.Code","Primary.ICD.Rollup",
"X2nd.ICD.Diagnosis.Code","X2nd.ICD.Rollup",
"X3rd.ICD.Diagnosis.Code","X3rd.ICD.Rollup",
"X4th.ICD.Diagnosis.Code", "X4th.ICD.Rollup",
"Incurred.Year", "CCHG.Label", "Zip..5.digit.") %>%
filter(med$Zip..5.digit. < 99403 & med$Zip..5.digit. > 98000)
# get data of chronic diseases
source('get_chronic.R')
icd <- all %>%
group_by(label) %>%
distinct(Member.ID.Encrypted) %>%
summarize(count=n()) %>%
arrange(desc(count))
chronic <- all %>%
group_by(label) %>%
distinct(Member.ID.Encrypted) %>%
summarize(count=n()) %>%
arrange(desc(count))
ggplot(data=chronic, aes(x=label, y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'pink') +
coord_flip() +
labs(title = "Most Common ICD", x = "ICD Rollups")
ggplot(data=chronic, aes(x=reorder(label, count)l, y=count)) +
ggplot(data=chronic, aes(x=reorder(label, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'red') +
coord_flip() +
labs(title = "Most Common ICD", x = "ICD Rollups")
ggplot(data=chronic, aes(x=reorder(label, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'red') +
coord_flip() +
labs(title = "Occurrences of Chronic Disease", x = "Chronic Disease")
View(cardiovascular)
cancer_type <- cancer %>%
group_by(Primary.ICD.Rollup) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n())
ggplot(data=cancer_type, aes(x=reorder(Primary.ICD.Rollup, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'red') +
coord_flip() +
labs(title = "Occurrences of Cancer", x = "Type of Cancer")
ggplot(data=cancer_type, aes(x=reorder(Primary.ICD.Rollup, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'pink') +
coord_flip() +
labs(title = "Occurrences of Cancer", x = "Type of Cancer")
View(cardiovascular)
ggplot(data=chronic, aes(x=reorder(label, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'red') +
coord_flip() +
labs(title = "Occurrences of Chronic Disease", x = "Chronic Disease")
cancer_type <- cancer %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n())
cardio_type <- cardiovascular %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n())
ggplot(data=cardio_type, aes(x=reorder(Primary.ICD.Diagnosis.Code, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'pink') +
coord_flip() +
labs(title = "Occurrences of Cancer", x = "Type of Cancer")
View(cardio_type)
ggplot(data=cardio_type[1:10,], aes(x=reorder(Primary.ICD.Diagnosis.Code, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'pink') +
coord_flip() +
labs(title = "Occurrences of Cancer", x = "Type of Cancer")
cardio_type <- cardiovascular %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n()) %>%
order_by(count)
cardio_type <- cardiovascular %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n()) %>%
sort_by(count)
cardio_type <- cardiovascular %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n()) %>%
arrange(count)
View(cardio_type)
cardio_type <- cardiovascular %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n()) %>%
arrange(-count)
ggplot(data=cardio_type[1:10,], aes(x=reorder(Primary.ICD.Diagnosis.Code, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'pink') +
coord_flip() +
labs(title = "Occurrences of Cancer", x = "Type of Cancer")
nrow(cardio_type)
View(cardiovascular)
ggplot(data=cancer_type, aes(x=reorder(Primary.ICD.Rollup, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'pink') +
coord_flip() +
labs(title = "Occurrences of Cancer", x = "Type of Cancer")
cancer_type <- cancer %>%
group_by(Primary.ICD.Rollup) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n())
ggplot(data=cancer_type, aes(x=reorder(Primary.ICD.Rollup, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'pink') +
coord_flip() +
labs(title = "Occurrences of Cancer", x = "Type of Cancer")
ggplot(med_revise %>% distinct(Member.ID.Encrypted)) +
geom_bar(aes(x=Member.Gender, color=Member.Gender, fill = Member.Gender)) +
labs(title = "Gender Distribution", x = "Gender", y = "Count") +
scale_y_continuous(name="Fluorescent intensity/arbitrary units", labels = scales::comma) +
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)))
View(med_revise)
med_revise %>% distinct(Member.ID.Encrypted)
a <- med_revise %>% distinct(Member.ID.Encrypted)
View(a)
gender_df <- med_revise %>% select(Member.ID.Encrypted, Member.Gender) %>% distinct(Member.ID.Encrypted))
gender_df <- med_revise %>% select(Member.ID.Encrypted, Member.Gender) %>% distinct(Member.ID.Encrypted)
View(gender_df)
gender_df <- med_revise %>% distinct(Member.ID.Encrypted) %>%
select(Member.ID.Encrypted, Member.Gender)
cardio_type <- cardiovascular %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted)
View(cardio_type)
cardio_type <- cardiovascular %>%
group_by(Primary.ICD.Diagnosis.Code) %>%
distinct(Member.ID.Encrypted) %>%
summarise(count = n()) %>%
arrange(-count)
gender_df <- med_revise %>% select(Member.ID.Encrypted, Member.Gender)
View(gender_df)
gender_df <- med_revise %>% select(Member.ID.Encrypted, Member.Gender) %>%
distinct(Member.ID.Encrypted, .keep_all = TRUE)
View(gender_df)
ggplot(gender_df) +
geom_bar(aes(x=Member.Gender, color=Member.Gender, fill = Member.Gender)) +
labs(title = "Gender Distribution", x = "Gender", y = "Count") +
scale_y_continuous(name="Fluorescent intensity/arbitrary units", labels = scales::comma) +
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)))
nrow(gender_df)
a <- med_revise %>% distinct(Member.ID.Encrypted)
nrow(a)
ggplot(gender_df) +
geom_bar(aes(x=Member.Gender, color=Member.Gender, fill = Member.Gender)) +
labs(title = "Gender Distribution", x = "Gender", y = "Count") +
scale_y_continuous(name="Fluorescent intensity/arbitrary units", labels = scales::comma) +
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)))
female <- gender_df %>% filter(Member.Gender == 'F')
female <- gender_df %>% filter(Member.Gender == 'F')
male <- gender_df %>% filter(Member.Gender == 'M')
nrow(female)
nrow(male)
ggplot(data=cardio_type[1:10,], aes(x=reorder(Primary.ICD.Diagnosis.Code, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'blue') +
coord_flip() +
labs(title = "Top 10 Occurrences of Cardiovascular", x = "Type of CardioVascular")
ggplot(gender_df) +
geom_bar(aes(x=Member.Gender, color=Member.Gender, fill = Member.Gender)) +
labs(title = "Gender Distribution", x = "Gender", y = "Count") +
scale_y_continuous(labels = scales::comma) +
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)))
nrow(female)/nrow(gender_df)
round(nrow(female)/nrow(gender_df), 2)
round(nrow(female)/nrow(gender_df), 2) * 100
(nrow(gender_df) - nrow(female)) / nrow(gender_df)
round((nrow(gender_df) - nrow(female)) / nrow(gender_df), 2)
round((nrow(gender_df) - nrow(female)) / nrow(gender_df), 2) * 100
ggplot(data=chronic, aes(x=reorder(label, count), y=count)) +
geom_bar(position="dodge",stat="identity", fill = 'red') +
coord_flip() +
labs(title = "Occurrences of Chronic Disease", x = "Chronic Disease")
